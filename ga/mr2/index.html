<!--
	TODO Bugs
		Fucking which way is z
		display windows go on top
		colored frames

	TODO for progress report
		


	Progress report, Nov 2020
	I feel good about this project. The pictograms thing is working well. Comic-book inbetweening
	I like how they make the editor fun to look at, and I like how intuitive it feels to change something and see all of its results
	-functions / things that become shader programs
		globes
		globe projections as a separate thing
	-rewritten in webgl, no three.js. Compilation target is javascript and glsl so that's the way it has to be
	-No output column. Automated naming though
	-don't have writing your own functions yet. When that exists, I might be able to do
	-more general approach to pictograms. No longer one algebra, now it's "whatever I need"
		I got super into the idea of trying to enumerate every visualizable function
		That's silly, that's trying to skip ahead, that's premature generalization and that's bad in code so it's bad in design too
	-picked maps as a nice example
		You need a customer to make things concrete, otherwise you're just scrwng around making presumptions about what other people MIGHT like
		See also direct2D, UML diagrams, my master's project, the first year of my phd, entity component systems, "solutions looking for problem"
		You can talk to andy hall about this as well
		You define your own algebras, that's the main innovation of GA and of object oriented programming
		projective geometric algebra instead of vanilla geometric algebra
		Currently you have to make new pictograms in javascript, so for the video I'll be kind of faking it
		But eventually you'll be able to bootstrap your own ones inside this editor

	Interested parties
		Language people: Alan, Meurig, Martin, futureOfCoding, Yoshiki, Cynthia Solomon, Andy Matuschak, Katherine Ye, Glench, Ken Perlin, Josh Horowitz
		GAists: bivector discord, Cam folks, Charles Gunn, Steven Der kenick, Pierre Philipp Denchant, Jonathan Cameron,Â David Hestenes, Paul Simeon
		Graphics/gamedev: Keenan Crane, Albert Chern, Fabrice, Haxiomic, Dan Holden, Daniel Piker, Ian and Norgg, Media Molecule, Chris Deleon, Senthuran
		Math/physicist: Ivan and Nina, Florian, Eric stansifer, Matt Hare
		Misc: London Rationalish, 
		Youtubers: Code parade, sebastian thingy, inigo quilez, Ben Eater, Coding Train guy, Grant sanderson

	TODO for world map
		Mapping from angles to texture coords, probably based in the thing
		Slicing system that allows you to see a sliced-open globe
		mappings/arrays
		Scalars, certainly ones that can be seen as angles
		+, cos, sin, exp, in pad.js
		A lot of it is about projection. Sending projection point to infinity
		
	Hey, could have "cartesian product" symbol, mathematicians would like you
		Or tensor product
		Or, ordinary javascript arrays
		But this isn't about arrays it's about functions

	General visual algebra
		New algebra for every video
		you have a way of defininig literals. Strings (bits really but strings do)
		you have functions defined on that algebra
		Sometimes you want different viz for different things. Real view, disc view, color view

	Fun GA things probably unnecessary to world map so avoid:
		pss
		dual, join


	



	After
		Videos about projective geometry
		"A different way to visualize calculus"
		Demo of features of this thing
		omicron reduction
		Draw curve, get curve as usable thing. Killer app!
		Transpiling to javascript
		If you're serious about people making clothes, think about makeup tutorials
		transpile to glsl first and foremost. Whole game runs in every shader woo!
		Eventually: VR game with conformal transformations. To help build folks' intuition? No! Because they're fun!
-->
<html>
	<head>
		<title>Projective Clifford Geometry</title>
		<meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
		<style>
			body {
				margin: 0px;
				overflow: hidden;
			}
		</style>
	</head>
	<body>
		<script>
			async function technicalInit() {
				let renderEverything = initRenderFunctions()

				initAlgebra()

				initPremadeBuffers()

				// await initMapsIntegrated()
				
				initButtons()
				initMouse()
				initWindowResizeSystem()

				initNames()
				initPictogramDrawers()
				initMvPictograms()
				// debugger
				await initGlobePictograms()

				// await initWorldMap()
				// await initDymaxion()

				initCarat()

				let typeableCharacters = initTypeableCharacters()
				let displayableCharacters = typeableCharacters + freeVariableCharacters + "?" + LAMBDA_SYMBOL + JOIN_SYMBOL
				initCharacterTexture(displayableCharacters)

				initTokenizer(displayableCharacters)

				await initTextureSampler()
				initFrames()

				initDisplayWindows()

				// initFuncViz()

				// initDrawing()

				{
					assignTypeAndData("bg", pictogramDrawers.angle, { value: .5 })

					assignMv("w")
					realLineX(getNameDrawerProperties("w").value, .5);
					assignMv("bgo")
					pointX(getNameDrawerProperties("bgo").value, .5);
					pointW(getNameDrawerProperties("bgo").value, 1.);
					assignMv("p")
					pointY(getNameDrawerProperties("p").value, .5);
					pointW(getNameDrawerProperties("p").value, 1.);

					let textureNames = ["earthColor", "ball", "cmb", "jupiter", "latAndLon2"]
					for (let i = 0; i < textureNames.length; ++i) {
						let texture = await Texture("data/" + textureNames[i] + ".png")
						assignTypeAndData(coloredNamesAlphabetically[13 + i], pictogramDrawers.globe, {
							texture,
							yaw: 0.,
							pitch: 0.
						})
						//this could compile to glsl, it's a struct
					}

					// assignTypeAndData("b", pictogramDrawers.globeProjection, {
					// 	pictogramProgram: globeProjectionPictogramPrograms["simpleAlternating"].pictogramProgram,
					// 	globeProperties: getNameDrawerProperties("gp"),
					// })
					// assignTypeAndData("o", pictogramDrawers.globeProjection, {
					// 	pictogramProgram: globeProjectionPictogramPrograms["simpleAlternating"].pictogramProgram,
					// 	globeProperties: getNameDrawerProperties("go"),
					// })
					
					assignTypeAndData("r", pictogramDrawers.test, { value: 0. })
				}

				function loop() {
					mouse.updateFromAsyncAndCheckClicks()
					//may wish to have keyboard too. You could even have >1 letter per frame!

					tokenizeEvaluateDisplay()

					for(var i = 0; i < updateFunctions.length; i++)
						updateFunctions[i]()

					renderEverything()

					++frameCount

					setTimeout(() => {
						requestAnimationFrame(loop)
					}, 1000./60.);
				}

				loop()
			}
		</script>

		<script src="../common/variables.js"></script>
		<script src="variables.js"></script>
		

		<script src="shaderUtils.js"></script>

		<script src="pictogramDrawers.js"></script>

		<script src="../common/buttons.js"></script>

		<script src="windowResizeSystem.js"></script>

		<script src="text.js"></script>
		
		<script src="tokenizeEvaluateDisplay.js"></script>
		<script src="padDisplay.js"></script>
		<script src="errorHighlight.js"></script>

		<script src="textureSampler.js"></script>

		<script src="caratAndKeyboard.js"></script>

		<script src="renderFunctions.js"></script>

		<script src="maps.js"></script>
		<script src="mapsIntegrated.js"></script>

		<script src="algebra.js"></script>
		<script src="dualQuaternions.js"></script>

		<script src="miscGl.js"></script>

		<script src="displays.js"></script>

		<script src="colors.js"></script>

		<script src="mouse.js"></script>

		<script src="names.js"></script>

		<script src="frames.js"></script>
		<script src="mvAppearances.js"></script>

		<script src="funcViz.js"></script>

		<script src="miscFunctions.js"></script>
		<script src="screenPosition.js"></script>

		<script src="displayWindows.js"></script>

		<script src="vertBufferFunctions.js"></script>

		<script src="transpiler.js"></script>

		<!-- <script src="video.js"></script> -->
		

		<script>
			technicalInit()
		</script>
	</body>
</html>